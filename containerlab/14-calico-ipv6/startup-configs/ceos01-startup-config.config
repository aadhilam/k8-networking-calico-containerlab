! Arista cEOS startup configuration for Dual-Stack Lab
! This switch acts as the upstream router with both IPv4 and IPv6 connectivity
!
hostname ceos-dualstack
!
! Enable IPv6 routing globally
ipv6 unicast-routing
!
! Define VLAN 10 for Kubernetes node connectivity
!
vlan 10
   name K8s-DualStack-Network
!
! Configure interfaces as access ports in VLAN 10
!
interface Ethernet1
   description Connection to dual-stack-control-plane
   switchport mode access
   switchport access vlan 10
!
interface Ethernet2
   description Connection to dual-stack-worker
   switchport mode access
   switchport access vlan 10
!
interface Ethernet3
   description Connection to dual-stack-worker2
   switchport mode access
   switchport access vlan 10
!
! Layer 3 interface for VLAN 10 - Gateway for K8s nodes
! This is the default gateway for both IPv4 and IPv6 traffic from nodes
!
interface Vlan10
   description K8s Nodes Gateway (Dual-Stack)
   ip address 10.10.10.1/24
   ipv6 address fd00:10:10::1/64
!
! Loopback interface - Simulates an external destination
! Pods will ping this to demonstrate external dual-stack connectivity
!
interface Loopback0
   description External Destination (Dual-Stack)
   ip address 1.1.1.1/32
   ipv6 address 2001:db8::1/128
!
! Enable IP routing
!
ip routing
ipv6 routing
!
! Static routes to pod CIDRs via K8s nodes
! These allow the switch to route return traffic back to pods
!
ip route 192.168.0.0/16 10.10.10.10
ipv6 route fd00:10:244::/48 fd00:10:10::10
!
! Management interface
!
interface Management0
   ip address dhcp
   no shutdown
!
! User configuration
!
username admin privilege 15 secret admin
!
! Enable HTTP API
!
management api http-commands
   no shutdown
!
end
